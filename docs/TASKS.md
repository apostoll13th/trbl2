# Задачи для собеседования

Этот документ содержит описания задач для кандидатов.

---

## Задача 1: Docker - Port недоступен

**Время:** 7-10 минут | **Сложность:** Средняя

**Легенда для кандидата:**
> Разработчик жалуется, что приложение не отвечает на порту 8080.
> Контейнер запущен, но curl возвращает connection refused.
> Найди проблему и почини.

**Что проверить:**
```bash
docker ps                     # контейнер running
curl localhost:8080           # connection refused
```

**Дополнительное задание:**
> Найди где лежит конфигурация docker-compose для этого приложения.

**Ожидаемые навыки:**
- Работа с Docker
- Debugging сетевых проблем
- Понимание разницы между 127.0.0.1 и 0.0.0.0
- Умение находить конфигурации

---

## Задача 2: DNS не работает

**Время:** 5-7 минут | **Сложность:** Простая

**Легенда для кандидата:**
> curl google.com не работает, но ping по IP работает.
> Почини DNS.

**Что проверить:**
```bash
ping 8.8.8.8       # работает
ping google.com    # Temporary failure in name resolution
curl google.com    # не работает
```

**Ожидаемые навыки:**
- Понимание работы DNS
- Знание /etc/resolv.conf
- Работа с systemd-resolved (опционально)

---

## Задача 3: Kubernetes - CrashLoopBackOff

**Время:** 7-10 минут | **Сложность:** Средняя-Сложная

**Легенда для кандидата:**
> Под постоянно рестартится.
> Разработчики говорят, что приложение работает.
> Разберись почему под не стартует.

**Что проверить:**
```bash
kubectl -n interview get pods      # CrashLoopBackOff или не Ready
kubectl -n interview describe pod  # смотреть Events
```

**Ожидаемые навыки:**
- Работа с kubectl
- Понимание probes (liveness/readiness)
- Умение читать describe и events
- Debugging pods

---

## Задача 4: GitLab Runner - Jobs не выполняются

**Время:** 5-7 минут | **Сложность:** Средняя

**Легенда для кандидата:**
> GitLab Runner зарегистрирован, но jobs падают сразу после старта.
> Разберись в чём проблема.

**Что проверить:**
```bash
systemctl status gitlab-runner    # active (running)
cat /etc/gitlab-runner/config.toml  # executor = "docker"
sudo gitlab-runner verify         # ошибка подключения к docker
```

**Ожидаемые навыки:**
- Понимание GitLab CI/CD
- Работа с GitLab Runner
- Понимание executor types
- Чтение конфигурационных файлов

---

## Задача 5: PostgreSQL - Не принимает подключения

**Время:** 7-10 минут | **Сложность:** Средняя

**Легенда для кандидата:**
> PostgreSQL установлен, но приложение не может подключиться.
> psql выдаёт ошибку аутентификации.
> Почини доступ к базе данных.

**Что проверить:**
```bash
systemctl status postgresql       # active (running)
sudo -u postgres psql             # FATAL: authentication failed
psql -U postgres                  # connection refused или auth error
```

**Ожидаемые навыки:**
- Понимание PostgreSQL аутентификации
- Знание pg_hba.conf
- Работа с systemctl
- Чтение логов PostgreSQL

---

## Задача 6: Disk Full - Место занято невидимыми файлами

**Время:** 10-15 минут | **Сложность:** Средняя-Сложная

**Легенда для кандидата:**
> df показывает что диск почти заполнен.
> Но du показывает что файлов почти нет.
> Приложение не может писать логи. Освободи место.

**Что проверить:**
```bash
df -h                             # показывает 95%+ использования
du -sh /var/log/*                 # показывает мало
ls -la /var/log/interview-app/    # почти пусто
```

**Ожидаемые навыки:**
- Понимание файловых дескрипторов
- Работа с lsof
- Понимание "deleted but open" файлов
- Освобождение места без перезагрузки

---

## Задача 7: SSL Certificate - HTTPS не работает

**Время:** 5-7 минут | **Сложность:** Простая

**Легенда для кандидата:**
> HTTPS сайт не работает.
> curl показывает ошибку сертификата.
> Браузер не открывает страницу.

**Что проверить:**
```bash
curl -k https://localhost         # работает с -k
curl https://localhost            # certificate has expired
openssl s_client -connect localhost:443 2>/dev/null | openssl x509 -noout -dates
```

**Ожидаемые навыки:**
- Понимание SSL/TLS сертификатов
- Работа с openssl
- Генерация самоподписанных сертификатов
- Конфигурация nginx SSL

---

## Задача 8: Nginx Systemd - Сервис не стартует

**Время:** 5-7 минут | **Сложность:** Простая

**Легенда для кандидата:**
> Nginx не стартует.
> systemctl start nginx падает с ошибкой.
> Почини чтобы сервис работал.

**Что проверить:**
```bash
systemctl status nginx            # failed
systemctl start nginx             # Job failed
journalctl -u nginx -n 50         # смотреть ошибки
nginx -t                          # configuration test
```

**Ожидаемые навыки:**
- Работа с systemd (journalctl, systemctl)
- Валидация nginx конфигурации
- Чтение логов ошибок
- Поиск синтаксических ошибок

---

## Порядок задач

### Рекомендуемые комбинации:

**Junior (30 мин, 2-3 задачи с подсказками):**
1. DNS (разогрев)
2. SSL Certificate
3. Nginx Systemd

**Middle (45 мин, 4-5 задач):**
1. DNS (разогрев)
2. Docker
3. PostgreSQL
4. Disk Full
5. Kubernetes (если время есть)

**Senior (60 мин, все задачи):**
1. Все 8 задач
2. Ожидается быстрое решение и объяснение root cause
3. Предложения по предотвращению подобных проблем

---

## Оценка

| Уровень | Ожидания |
|---------|----------|
| Junior | 2-3 простые задачи с подсказками |
| Middle | 4-5 задач самостоятельно |
| Senior | Все 8 задач быстро, объясняет root cause, предлагает мониторинг |

### Критерии оценки

| Критерий | Баллы |
|----------|-------|
| Правильная диагностика | 40% |
| Рабочее решение | 30% |
| Объяснение причины | 20% |
| Скорость решения | 10% |
